# Copyright (C) 2018 Istituto Italiano di Tecnologia (IIT). All rights reserved.
# This software may be modified and distributed under the terms of the
# GNU Lesser General Public License v2.1 or any later version.

# GENERATE THE LIBRARY
# ====================

# TODO: sooner or later this file will be stored in YARP
yarp_idl_to_dir(clock_rpc.thrift
    ${CMAKE_CURRENT_SOURCE_DIR}/autogenerated CLOCKRPC_SRC CLOCKRPC_HEADERS CLOCKRPC_INCLUDES)

# BUILD THE LIBRARY
# =================

# Add the target
add_library(ClockServer ${CLOCKRPC_SRC} ${CLOCKRPC_HEADERS})

# Needed for static libraries
set_target_properties(ClockServer PROPERTIES POSITION_INDEPENDENT_CODE ON)

# Extract the include directories from the YARP component interface
find_package(YARP 3.0.0 REQUIRED)
target_link_libraries(ClockServer YARP::YARP_OS)

# Setup the include directories
target_include_directories(ClockServer PUBLIC
    $<BUILD_INTERFACE:${CLOCKRPC_INCLUDES}>)
